<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Festival Planner</title>
  <script>
    // GitHub Pages deep-link fallback:
    // Rewrites unknown paths to the weekend root and passes original path via ?path=...
    // so the app can restore state without serving 404 on refresh.
    (function () {
      var path = String(location.pathname || "/");
      var search = String(location.search || "");
      var hash = String(location.hash || "");
      var parts = path.split("/").filter(Boolean);
      var matchIndex = -1;

      for (var i = 0; i <= parts.length - 3; i += 1) {
        if (/^\d{4}$/.test(parts[i + 1]) && /^(w1|w2)$/i.test(parts[i + 2])) {
          matchIndex = i;
          break;
        }
      }

      if (matchIndex >= 0) {
        var prefix = parts.slice(0, matchIndex);
        var festival = parts[matchIndex];
        var year = parts[matchIndex + 1];
        var weekend = String(parts[matchIndex + 2] || "").toLowerCase();
        var canonicalParts = prefix.concat([festival, year, weekend]);
        var canonical = "/" + canonicalParts.join("/") + "/";
        var target = canonical + "?path=" + encodeURIComponent(path + search + hash);
        location.replace(target);
        return;
      }

      var fallback = "/?path=" + encodeURIComponent(path + search + hash);
      location.replace(fallback);
    })();
  </script>
</head>
<body></body>
</html>
